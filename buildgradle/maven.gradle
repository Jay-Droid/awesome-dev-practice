apply plugin: 'maven'
println("--------Maven Publish--------")
//本地Maven仓库地址
def MAVEN_LOCAL_REPO_PATH = rootProject.ext.mavenRepo['repoPathLocal']
//远程Maven仓库的URL
def MAVEN_REPO_RELEASE_URL = rootProject.ext.mavenRepo['repoPathRemote']
//远程Maven仓库用户名
def USER_NAME = rootProject.ext.mavenRepo['userName']
//远程Maven仓库密码
def PASSWORD = rootProject.ext.mavenRepo['password']
// 唯一标识 每个组件都要指定
def GROUP = group.toString()
// 项目名称 根据包名取最后的路径名称
def ARTIFACT_ID = GROUP.substring(GROUP.lastIndexOf(".") + 1, GROUP.length())
// 版本号 每个组件都要指定
def VERSION = version.toString()

println("GROUP: $GROUP")
println("ARTIFACT_ID: $ARTIFACT_ID")
println("VERSION: $VERSION")
println("PASSWORD: $PASSWORD")
println("USER_NAME: $USER_NAME")
println("dependencies_path: $GROUP:$ARTIFACT_ID:$VERSION")

uploadArchives {
    repositories.mavenDeployer {
        // 本地仓库路径
//        repository(url: MAVEN_LOCAL_REPO_PATH)
        //远程仓库路径
//        repository(url: MAVEN_REPO_RELEASE_URL) {
//            //你Nexus的账户密码
//            authentication(userName: USER_NAME, password: PASSWORD)
//        }
        // 唯一标识
        pom.groupId = GROUP
        // 项目名称
        pom.artifactId = ARTIFACT_ID
        // 版本号
        pom.version = VERSION
    }
}

/**
 本地服务 nexus 路径：
 cd /Users/xuejiewang/AndroidStudioProjects/nexus-3.22.0-02-mac/nexus-3.22.0-02/bin
 nexus 命令：
 ./nexus start
 ./nexus restart
 ./nexus status
 ./nexus stop
 nexus 地址：
 http://localhost:8081/
 */
